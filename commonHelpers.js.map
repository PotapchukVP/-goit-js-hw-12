{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon-2.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__afad9bec__\"","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport axios from 'axios';\n\nimport octagonIcon from './img/bi_x-octagon-2.svg';\n\nconst gallery = document.querySelector('.gallery-wrapper');\nconst searchButtn = document.querySelector('.search-button');\nconst loadButton = document.querySelector('.load-more-button');\nconst loader = document.querySelector('.loader-position');\nconst loadingLabel = document.querySelector('.loading-label');\n\niziToast.settings({\n  timeout: 5000,\n  theme: 'light',\n  message:\n    'Sorry, there are no images matching your search query. Please, try again!',\n  messageColor: 'rgba(250, 250, 250, 1)',\n  maxWidth: '392px',\n  messageSize: '322px',\n  position: 'topRight',\n  color: '#EF4040',\n  progressBar: true,\n  progressBarColor: '#B51B1B',\n\n  icon: '',\n  iconText: '',\n  iconColor: '',\n  iconUrl: octagonIcon,\n  image: '',\n  imageWidth: 50,\n\n  zindex: null,\n  layout: 1,\n  balloon: false,\n  close: true,\n  closeOnEscape: false,\n  closeOnClick: true,\n  displayMode: 0,\n  target: '',\n  targetFirst: true,\n\n  animateInside: false,\n  progressBarEasing: 'linear',\n  overlayClose: true,\n\n  transitionIn: 'fadeInUp',\n  transitionOut: 'fadeOut',\n  transitionInMobile: 'fadeInUp',\n  transitionOutMobile: 'fadeOutDown',\n  buttons: {},\n  inputs: {},\n  onOpening: function () {},\n  onOpened: function () {},\n  onClosing: function () {},\n  onClosed: function () {},\n});\n\nconst baseURL = 'https://pixabay.com/api/';\nconst apiKey = '41858556-aa96e57fcb7c92b306b25a0e4';\nconst axiosInstance = axios.create({\n  baseURL: baseURL,\n});\n\nlet totalPages = 0;\nlet options = {\n  key: apiKey,\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page: 40,\n};\n\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n  close: true,\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nsearchButtn.addEventListener('click', event => {\n  event.preventDefault();\n  options.q = document.querySelector('#input-field').value.trim();\n  reloadPage();\n  performSearch();\n});\n\nwindow.addEventListener('keydown', event => {\n  if (event.key === 'Enter') {\n    event.preventDefault();\n    options.q = document.querySelector('#input-field').value.trim();\n    reloadPage();\n    performSearch();\n    scrollByGalleryHeight();\n  }\n});\n\nloadButton.addEventListener('click', event => {\n  event.preventDefault();\n  options.page += 1;\n  performSearch();\n  scrollByGalleryHeight();\n});\n\nfunction reloadPage() {\n  gallery.innerHTML = '';\n  options.page = 1;\n  loadingLabel.style.display = 'none';\n}\n\nfunction performSearch() {\n  if (options.q === '') return iziToast.show();\n\n  const queryStr = new URLSearchParams(options).toString();\n  const apiUrl = `?${queryStr}`;\n\n  fetchImages(apiUrl)\n    .then(images => renderGallery(images))\n    .catch(error => console.error(error));\n}\n\nasync function fetchImages(apiUrl) {\n  try {\n    const response = await axiosInstance.get(apiUrl);\n    if (\n      !totalPages ||\n      response.data.totalHits !== totalPages * options.per_page\n    )\n      totalPages = Math.ceil(response.data.totalHits / options.per_page);\n\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction renderGallery(images) {\n  loader.style.display = 'none';\n\n  if (images.totalHits === 0) {\n    gallery.innerHTML = '';\n    loadButtonShow();\n    return iziToast.show();\n  }\n\n  const newImages = images.hits.map(image => {\n    return `<li class=\"gallery-item\"> \n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          data-src=\"${image.webformatURL}\"\n          alt=\"${image.tags}\">\n      </a>\n      <div class=\"image-info\">\n        <label class=\"label-text\">Likes\n          <p>${image.likes}</p>\n        </label>\n        <label class=\"label-text\">Views\n          <p>${image.views}</p>\n        </label>\n        <label class=\"label-text\">Comments\n          <p>${image.comments}</p>\n        </label>\n        <label class=\"label-text\">Downloads\n          <p>${image.downloads}</p>\n        </label>\n      </div>\n    </li>`;\n  });\n\n  gallery.insertAdjacentHTML('beforeend', newImages.join(''));\n  lazyLoadImages();\n  lightbox.refresh();\n  loadButtonShow();\n}\n\nfunction loadButtonShow() {\n  loadButton.style.display = document.querySelector('.gallery-item')\n    ? 'flex'\n    : 'none';\n  if (options.page >= totalPages && totalPages !== 0) {\n    loadButton.style.display = 'none';\n    loadingLabel.style.display = 'flex';\n    return;\n  }\n}\n\nwindow.addEventListener('scroll', lazyLoadImages);\nfunction lazyLoadImages() {\n  const lazyImages = document.querySelectorAll('.gallery-image');\n\n  lazyImages.forEach(image => {\n    if (isInViewport(image)) {\n      image.src = image.dataset.src;\n    }\n  });\n}\n\nfunction isInViewport(element) {\n  const rect = element.getBoundingClientRect();\n  return (\n    rect.bottom >= 0 &&\n    rect.right >= 0 &&\n    rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.left <= (window.innerWidth || document.documentElement.clientWidth)\n  );\n}\nfunction scrollByGalleryHeight() {\n  const galleryItem = document.querySelector('.gallery-item');\n\n  if (galleryItem) {\n    const galleryItemHeight = galleryItem.offsetHeight;\n    window.scrollBy(0, galleryItemHeight * 2);\n  }\n}\n"],"names":["octagonIcon","gallery","searchButtn","loadButton","loader","loadingLabel","iziToast","baseURL","apiKey","axiosInstance","axios","totalPages","options","lightbox","SimpleLightbox","event","reloadPage","performSearch","scrollByGalleryHeight","apiUrl","fetchImages","images","renderGallery","error","response","loadButtonShow","newImages","image","lazyLoadImages","isInViewport","element","rect","galleryItem","galleryItemHeight"],"mappings":"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"}